app-id: at.priv.toastfreeware.ConfClerk
runtime: org.kde.Platform
runtime-version: '5.12'
sdk: org.kde.Sdk
command: confclerk
rename-icon: confclerk
copy-icon: true
rename-desktop-file: confclerk.desktop
finish-args:
  # X11 + XShm access
  - "--share=ipc"
  - "--socket=x11"
  # Wayland access
  - "--socket=wayland"
  # The app gets the schedules from the Internet
  - "--share=network"

cleanup:
  - "/include"
  - "/lib/pkgconfig"
  - "/man"
  - "/share/doc"
  - "/share/gtk-doc"
  - "/share/man"
  - "/share/pkgconfig"
  - "*.la"
  - "*.a"

modules:
  - name: confclerk
    buildsystem: qmake
    post-install:
        - install -D -m a+r data/confclerk.desktop /app/share/applications/confclerk.desktop
        #- install -D -m a+r data/confclerk.svg /app/share/icons/hicolor/scalable/apps/confclerk.svg
        - rsvg-convert -w 128 -h 128 -f png -o data/confclerk.png data/confclerk.svg
        - install -D -m a+r data/confclerk.png /app/share/icons/hicolor/128x128/apps/confclerk.png
        - install -D -m u+rwx,a+rx ./src/bin/confclerk /app/bin/confclerk

    sources:
      - type: archive
        url: http://www.toastfreeware.priv.at/tarballs/confclerk/confclerk-0.6.4.tar.gz
        sha256: 6389fc74fd6827d59aa26f6792919583e8266e65818c3bda5cdb927e09793083

      - type: file
        path: at.priv.toastfreeware.ConfClerk.appdata.xml
